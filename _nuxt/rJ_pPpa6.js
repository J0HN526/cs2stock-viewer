import{u as R}from"./7_zOicDu.js";import{C as G,A as v,c as r,x as c,a as e,t as o,F as V,q as j,o as l,m as x,s as h}from"./D6_3hjPy.js";const J={class:"container mx-auto px-4 py-8"},K={key:0,class:"text-center py-12"},O={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},Q={key:2},X={class:"bg-gray-800 rounded-lg p-4 mb-6 flex flex-wrap gap-4 text-sm"},Y={class:"flex items-center gap-2"},Z={class:"flex items-center gap-2"},T={class:"flex items-center gap-2"},ee={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},te={class:"bg-gray-900 flex items-center justify-center p-4 h-48"},se=["src","alt"],ae={class:"p-4"},ne={class:"space-y-1 text-sm text-gray-300"},re={class:"flex"},le={class:"flex"},oe={key:0,class:"flex"},ie={key:1,class:"flex"},de={key:0,class:"mt-2 text-blue-300 text-sm italic"},ce={key:1,class:"mt-3 pt-3 border-t border-gray-700"},ue={class:"text-xs space-y-1"},ye={__name:"test1",props:{id:{type:String,required:!0}},async setup(pe){let m,k;const{data:g,error:w,pending:q}=([m,k]=G(()=>R("http://156.238.243.110:8080/api/inventory/76561198386265483","$LLVhuPl9pl")),m=await m,k(),m),y=v(()=>{var i,t,s,_,f,C;return!((s=(t=(i=g.value)==null?void 0:i.data)==null?void 0:t.raw)!=null&&s.assets)||!((C=(f=(_=g.value)==null?void 0:_.data)==null?void 0:f.raw)!=null&&C.descriptions)?[]:g.value.data.raw.assets.map(d=>{var $,E,F,L,N,S;const n=g.value.data.raw.descriptions.find(a=>a.classid===d.classid&&a.instanceid===d.instanceid);if(!n)return null;const u=($=n.tags)==null?void 0:$.find(a=>a.category==="Rarity"),p=(E=n.tags)==null?void 0:E.find(a=>a.category==="Exterior"),b=(F=n.tags)==null?void 0:F.find(a=>a.category==="Weapon"),D=(L=n.descriptions)==null?void 0:L.find(a=>a.name==="exterior_wear"),I=D?D.value.replace("外观: ",""):null,B=(N=n.descriptions)==null?void 0:N.find(a=>a.name==="nametag"),M=B?B.value:null,W=(S=n.descriptions)==null?void 0:S.find(a=>a.name==="sticker_info");let z=null;if(W){const a=W.value.match(/印花: (.+?)<\/center>/);z=a?a[1].split(", ").map(P=>P.trim()):null}return{id:`${d.assetid}-${d.classid}-${d.instanceid}`,name:n.market_name||n.name,type:n.type,iconUrl:`https://steamcommunity-a.akamaihd.net/economy/image/${n.icon_url}`,rarity:{name:(u==null?void 0:u.localized_tag_name)||"普通",color:(u==null?void 0:u.color)||"#B0C3D9"},exterior:{name:(p==null?void 0:p.localized_tag_name)||"",color:A(p==null?void 0:p.internal_name)},weapon:(b==null?void 0:b.localized_tag_name)||null,wear:I,nametag:M,stickers:z,tradable:n.tradable===1,marketable:n.marketable===1,nameColor:n.name_color||"#D2D2D2",marketHashName:n.market_hash_name,assetid:d.assetid,classid:d.classid,instanceid:d.instanceid}}).filter(Boolean)}),A=i=>({WearCategory0:"#4b69ff",WearCategory1:"#5e98d9",WearCategory2:"#4b69ff",WearCategory3:"#eb4b4b",WearCategory4:"#8847ff"})[i]||"#B0C3D9",U=v(()=>y.value.filter(i=>i.tradable).length),H=v(()=>y.value.filter(i=>i.marketable).length);return(i,t)=>(l(),r("div",J,[c(q)?(l(),r("div",K,t[0]||(t[0]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-slate-500"},null,-1),e("p",{class:"mt-2 text-gray-400"},"加载库存中...",-1)]))):c(w)?(l(),r("div",O,[e("p",null,"加载库存失败: "+o(c(w).message),1)])):(l(),r("div",Q,[e("div",X,[e("div",Y,[t[1]||(t[1]=e("div",{class:"w-3 h-3 bg-blue-500 rounded-full"},null,-1)),e("span",null,"总物品: "+o(c(y).length),1)]),e("div",Z,[t[2]||(t[2]=e("div",{class:"w-3 h-3 bg-green-500 rounded-full"},null,-1)),e("span",null,"可交易: "+o(c(U)),1)]),e("div",T,[t[3]||(t[3]=e("div",{class:"w-3 h-3 bg-purple-500 rounded-full"},null,-1)),e("span",null,"可出售: "+o(c(H)),1)])]),e("div",ee,[(l(!0),r(V,null,j(c(y),s=>(l(),r("div",{key:s.id,class:"bg-gray-800 rounded-lg overflow-hidden hover:shadow-lg transition-shadow duration-200"},[e("div",te,[e("img",{src:s.iconUrl,alt:s.name,class:"max-h-full max-w-full object-contain",loading:"lazy"},null,8,se)]),e("div",ae,[e("h3",{class:"font-medium truncate mb-2",style:h({color:s.nameColor})},o(s.name),5),e("div",ne,[e("div",re,[t[4]||(t[4]=e("span",{class:"w-20 text-gray-400"},"类型",-1)),e("span",null,o(s.type),1)]),e("div",le,[t[5]||(t[5]=e("span",{class:"w-20 text-gray-400"},"品质",-1)),e("span",{style:h({color:s.rarity.color})},o(s.rarity.name),5)]),s.exterior.name?(l(),r("div",oe,[t[6]||(t[6]=e("span",{class:"w-20 text-gray-400"},"外观",-1)),e("span",{style:h({color:s.exterior.color})},o(s.exterior.name),5)])):x("",!0),s.wear?(l(),r("div",ie,[t[7]||(t[7]=e("span",{class:"w-20 text-gray-400"},"磨损",-1)),e("span",null,o(s.wear),1)])):x("",!0)]),s.nametag?(l(),r("p",de,o(s.nametag),1)):x("",!0),s.stickers?(l(),r("div",ce,[t[8]||(t[8]=e("p",{class:"text-xs text-gray-400 mb-1"},"印花",-1)),e("ul",ue,[(l(!0),r(V,null,j(s.stickers,(_,f)=>(l(),r("li",{key:f},o(_),1))),128))])])):x("",!0)])]))),128))])]))]))}};export{ye as default};
