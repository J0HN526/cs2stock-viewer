import{r,g as U,j as V,c as l,a as t,k as C,v as B,l as R,m as v,n as q,p as G,d as J,t as i,F as S,q as L,s as Z,x as A,y as b,o as n}from"./D6_3hjPy.js";import{u as Q}from"./7_zOicDu.js";const ee={class:"max-w-6xl mx-auto py-2"},te={class:"container mx-auto px-4 py-8 max-w-6xl"},se={class:"flex space-x-2 w-full"},oe={class:"absolute z-10 mt-2 w-64 origin-top-right bg-white border border-gray-200 rounded-md shadow-lg"},ae=["onClick"],le=["src"],ne={class:"text-gray-800"},re={key:0,class:"flex flex-col items-center justify-center py-12"},ie={key:1,class:"p-4 mb-6 bg-red-100 text-red-700 rounded-md"},de={key:2,class:"space-y-6"},ce={class:"flex flex-wrap gap-2 border-b border-gray-200 pb-4"},ue=["onClick"],me={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 p-4"},ve=["onMouseenter","onClick"],ge={class:"relative w-full h-32 flex items-center justify-center bg-gray-50 dark:bg-slate-700"},pe=["src","alt","onLoad","onError"],xe={key:0,class:"absolute inset-0 flex items-center justify-center"},be={class:"p-3 border-t border-gray-100 dark:border-gray-700"},fe={class:"flex justify-between items-start"},he={class:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate flex-1"},ye={key:0,class:"ml-2 text-xs bg-red-500 text-white px-1 rounded"},we={class:"flex justify-between items-center mt-2"},_e={key:0,class:"text-xs font-semibold text-green-600 dark:text-green-400"},ke={key:0,class:"absolute top-2 right-2 bg-blue-500 text-white text-xs px-1 rounded"},Ie={class:"bg-white border rounded-lg shadow-xl w-64 p-4 pointer-events-auto"},De={class:"flex gap-4"},Ce=["src"],Se={class:"font-bold text-gray-900"},Le={class:"text-xs text-gray-600 mt-1"},$e={__name:"main",setup(je){const f=r(""),y=r(!1),m=r(""),d=r(null),g=r("Pistols"),c=r(null);let w=null;const _=r("1"),F=()=>{_.value=!_.value},j=r(0),E=r(0),M=s=>{const u=s.clientX+20,x=s.clientY+20,D=window.innerWidth-260,K=window.innerHeight-120;j.value=Math.min(u,D),E.value=Math.min(x,K)};U(()=>{window.addEventListener("mousemove",M)}),V(()=>{window.removeEventListener("mousemove",M)});const $=async()=>{if(!f.value){m.value="请输入Steam64 ID";return}let s=f.value;const o=s.match(/steamcommunity\.com\/profiles\/(\d+)/);if(o&&(s=o[1]),s.includes("/id/")){m.value="暂不支持自定义 ID，请前往 steamid.io 获取 Steam64 ID";return}y.value=!0,m.value="",d.value=null;try{const{data:e,error:a}=await Q(`http://156.238.243.110:8080/api/inventory/${s}`,"$DL25yRdZVP");if(a.value){m.value=a.value.message||"获取库存失败";return}if(e.value.success){d.value=e.value.data.processed,console.log(e.value),Object.values(d.value.categories).forEach(x=>{x.forEach(D=>{D.imageLoaded=!1})});const u=Object.keys(d.value.categories).find(x=>d.value.categories[x].length>0);u&&(g.value=u)}else m.value=e.value.error||"获取库存失败"}catch(e){m.value=e.message||"发生错误"}finally{y.value=!1}},H=s=>{var a;const o=(a=d.value)==null?void 0:a.categories[g.value],e=o==null?void 0:o.find(u=>u.assetid===s);e&&(e.imageLoaded=!0)},O=s=>{var a;const o=(a=d.value)==null?void 0:a.categories[g.value],e=o==null?void 0:o.find(u=>u.assetid===s);e&&(e.imageLoaded=!1)},W=s=>{clearTimeout(w),c.value=s},N=()=>{w=setTimeout(()=>{c.value=null},300)},k=s=>({1:"bg-green-600",2:"bg-blue-600",3:"bg-yellow-600",4:"bg-orange-600",5:"bg-red-600"})[s]||"bg-gray-600",z=s=>s?Number(s).toFixed(2):"0.00",P=s=>{alert(`点击了物品: ${s.market_hash_name}`)},p=r(!1),I=r(null),h=r(null),X=()=>{p.value=!p.value},Y=s=>{h.value={id:s.id,name:s.name,avatar:s.avatar},p.value=!1,console.log("选中用户信息：",h.value)},T=s=>{I.value&&!I.value.contains(s.target)&&(p.value=!1)};return U(async()=>{window.addEventListener("click",T);try{const o=await(await fetch("http://156.238.243.110/api/getUsers")).json();users.value=o}catch(s){console.error("获取用户失败:",s)}}),V(()=>{window.removeEventListener("click",T)}),(s,o)=>(n(),l("div",null,[t("div",{class:"max-w-6xl mx-auto bg-pink-200 mt-5 h-6"},[t("div",{class:"collapse-header flex justify-between items-center cursor-pointer"},[o[2]||(o[2]=t("span",{class:"collapse-text text-base bg-pink-500 ml-2 rounded-lg"},"更多想法，请联系John526@163.com",-1)),t("span",{class:"collapse-arrow bg-red-500 rounded-lg mr-2",onClick:F}," 点击关闭说明 ")])]),C(t("header",ee,o[3]||(o[3]=[R('<div class="bg-red-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-6"><p class="font-semibold">使用须知：</p><p>此页面 <strong>只使用您提供的 Steam64 ID</strong>，不会获取其他隐私内容。</p></div><div class="bg-gray-100 p-4 rounded mb-6"><h2 class="text-xl font-semibold mb-2"><i class="fa-solid fa-circle-exclamation" style="color:#fe0101;"></i>    什么是自定义 ID 和 Steam64 ID？ </h2><p class="mb-2"> 自定义 ID 是您设置的个性化用户名，例如 ID 后面的自定义代码 <span class="text-red-600 font-semibold">gabelogannewell</span>： </p><code class="bg-white px-2 py-1 rounded text-sm text-blue-600 block mb-2"> https://steamcommunity.com/id/gabelogannewell </code><p class="mb-4"> 此自定义属性目前本站<strong>不支持直接转换</strong>，您可以前往 <a href="https://steamid.io/" class="text-blue-500 underline" target="_blank" rel="noopener">steamid.io</a> ，填入自定义 ID（如 <span class="text-red-600 font-semibold">gabelogannewell</span>）后，系统会自动显示对应的 Steam64 ID，复制后填写在下方输入框中。 </p><p class="mb-2"> 而 Steam64 ID 是系统生成的一串数字，例如链接最后的 17 位数字： <span class="text-blue-600 font-semibold">76561198825998777</span></p><code class="bg-white px-2 py-1 rounded text-sm text-green-600 block mb-4"> https://steamcommunity.com/profiles/76561198825998777 </code><h2 class="text-lg font-semibold mb-2"><i class="fa-solid fa-signs-post" style="color:#ff0000;"></i>    如何查看自己的自定义 ID 或 Steam64 ID？ </h2><p> 打开 Steam 客户端，点击右上角的 <strong>“您的用户名” → “查看我的个人资料”</strong>，然后在浏览器地址栏中查看链接。如果是： </p><ul class="list-disc list-inside text-sm text-gray-700 mt-2 space-y-1"><li><code class="bg-white px-1 py-0.5 rounded text-blue-600">https://steamcommunity.com/id/xxx</code>，其中 <code class="text-red-600">xxx</code> 就是您的<strong>自定义 ID</strong></li><li><code class="bg-white px-1 py-0.5 rounded text-green-600">https://steamcommunity.com/profiles/12345678901234567</code>， 则结尾的 <code class="text-blue-600">17 位数字</code> 就是您的 <strong>Steam64 ID</strong></li></ul></div>',2)]),512),[[B,_.value]]),t("div",te,[o[7]||(o[7]=t("h1",{class:"text-3xl font-bold text-center text-gray-800 mb-8"},"CS:GO 库存查看器",-1)),t("div",se,[C(t("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>f.value=e),class:"flex-[4] px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"输入Steam64 ID 或 Steam 社区URL",onKeyup:G($,["enter"])},null,544),[[q,f.value]]),t("button",{onClick:$,class:"flex-[1] px-6 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"}," 查询库存 "),t("div",{class:"flex-[1] relative inline-block text-left",ref_key:"dropdown",ref:I},[t("button",{onClick:X,class:"inline-flex justify-center w-full px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none"},[J(i(h.value?h.value.name:"选择用户")+" ",1),o[4]||(o[4]=t("svg",{class:"w-5 h-5 ml-2 -mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),C(t("div",oe,[(n(!0),l(S,null,L(s.users,e=>(n(),l("div",{key:e.id,class:"px-4 py-2 hover:bg-gray-100 cursor-pointer flex items-center space-x-3",onClick:a=>Y(e)},[t("img",{src:e.avatar,alt:"avatar",class:"w-8 h-8 rounded-full object-cover"},null,8,le),t("span",ne,i(e.name),1)],8,ae))),128))],512),[[B,p.value]])],512)]),y.value?(n(),l("div",re,o[5]||(o[5]=[t("div",{class:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"},null,-1),t("p",{class:"mt-4 text-gray-600"},"加载中...",-1)]))):v("",!0),m.value?(n(),l("div",ie,i(m.value),1)):v("",!0),d.value?(n(),l("div",de,[t("div",ce,[(n(!0),l(S,null,L(d.value.categories,(e,a)=>(n(),l("button",{key:a,onClick:u=>g.value=a,class:b(["px-4 py-2 text-sm font-medium rounded-md transition-colors",g.value===a?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},i(a)+" ("+i(e.length)+") ",11,ue))),128))]),t("div",me,[(n(!0),l(S,null,L(d.value.categories[g.value],e=>(n(),l("div",{key:e.assetid,class:"relative bg-white dark:bg-slate-800 rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all duration-300 cursor-pointer transform hover:-translate-y-1",onMouseenter:a=>W(e),onMouseleave:N,onClick:a=>P(e)},[t("div",{class:b(["w-full h-2 transition-colors duration-300",k(e.wear_grade)])},null,2),t("div",ge,[t("img",{src:e.image,alt:e.market_hash_name,class:b(["w-full h-full object-contain p-2 transition-opacity duration-300",{"opacity-0":!e.imageLoaded}]),onLoad:a=>H(e.assetid),onError:a=>O(e.assetid)},null,42,pe),e.imageLoaded?v("",!0):(n(),l("div",xe,o[6]||(o[6]=[t("div",{class:"animate-pulse flex space-x-4"},[t("div",{class:"rounded-full bg-gray-200 dark:bg-slate-600 h-8 w-8"})],-1)])))]),t("div",be,[t("div",fe,[t("div",he,i(e.skin||e.weapon),1),e.stattrak?(n(),l("div",ye," ST ")):v("",!0)]),t("div",we,[t("div",{class:b(["text-xs text-center text-white rounded px-2 py-0.5",k(e.wear_grade)])},i(e.wear_name),3),e.price?(n(),l("div",_e," $"+i(z(e.price)),1)):v("",!0)]),e.isNew?(n(),l("div",ke," NEW ")):v("",!0)])],40,ve))),128))]),c.value?(n(),l("div",{key:0,class:"fixed z-50 pointer-events-none",style:Z({top:`${E.value}px`,left:`${j.value}px`}),onMouseenter:o[1]||(o[1]=e=>s.clearTimeout(A(w))),onMouseleave:N},[t("div",Ie,[t("div",De,[t("img",{src:c.value.image,class:"w-20 h-20 object-contain"},null,8,Ce),t("div",null,[t("div",Se,i(c.value.market_hash_name),1),t("div",{class:b(["text-sm mt-1",k(c.value.wear_grade)])},i(c.value.wear_name)+" ("+i(c.value.wear.toFixed(6))+") ",3),t("div",Le,"分类: "+i(c.value.category),1)])])])],36)):v("",!0)])):v("",!0)])]))}};export{$e as default};
